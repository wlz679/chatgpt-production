{"version":3,"file":"index-xeQDeP_c.js","sources":["../../../src/api/deviceManage.ts","../../../src/views/traceability/maintain/deviceManage/index.vue"],"sourcesContent":["import request from \"./request\";\r\n\r\n// 设备列表\r\nexport const deviceList = (data?: any) =>\r\n  request.get(\"/devices/device/list\", data);\r\n\r\n// 设备详情\r\nexport const deviceDetail = (id: any) => request.get(`/devices/device/${id}`);\r\n\r\n// 添加设备\r\nexport const addDevice = (data?: any) =>\r\n  request.post(\"/devices/device/add\", data);\r\n\r\n// 修改设备\r\nexport const modifyDevice = (id: any, data: any) =>\r\n  request.patch(`/devices/device/${id}/modify`, data);\r\n\r\n// 删除设备\r\nexport const deleteDevice = (data?: any) =>\r\n  request.delete(`/devices/device/delete`, data);\r\n\r\n// 取消关联点位\r\nexport const unbindDevice = (data?: any) =>\r\n  request.patch(\"/devices/device/unlink\", data);\r\n\r\n// 修改设备配置\r\nexport const deviceConfigModify = (data?: any) =>\r\n  request.patch(`/devices/device/config/modify`, data);\r\n\r\n// 设备绑定历史记录\r\nexport const deviceBindHistory = (data?: any) =>\r\n  request.get(`/devices/device/bind/history`, data);\r\n\r\n// 获取设备状态\r\nexport const deviceStatus = (id: any) =>\r\n  request.get(`/devices/device/status/${id}`);\r\n\r\n// 设备维度查询设备配置详情\r\nexport const devicetConfigDetail = (data?: any) =>\r\n  request.get(`/devices/device/config/${data}`);\r\n\r\n// 设备维度设备配置修改记录列表\r\nexport const deviceCommandRecord = (data?: any) =>\r\n  request.get(\"/devices/device/command/record/list\", data);\r\n\r\n// 导出设备信息列表\r\nexport const exportDevices = (data: any, config?: any) =>\r\n  request.get(\"/export/devices\", data, config);\r\n","<template>\r\n  <div class=\"common-container\">设备管理</div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, onMounted, watch } from \"vue\";\r\nimport { deviceList } from \"@/api/deviceManage\";\r\nimport { filterParams, handle_err } from \"@/utils/function\";\r\n\r\n// const env = import.meta.env;\r\n\r\n//安装时间\r\n\r\ninterface Form {\r\n  PointNumber: string;\r\n  RegionNumber: string;\r\n  DeviceNumber: string;\r\n  DeviceType: string;\r\n  SensorsType: string;\r\n  Bind: boolean | string;\r\n  StartTime?: number | string;\r\n  EndTime?: number | string;\r\n  ExactMatch: boolean;\r\n  PageSize: number;\r\n  PageNumber: number;\r\n}\r\nconst formData = ref<Form>({\r\n  PointNumber: \"\", //点位编号\r\n  RegionNumber: \"\", //点位行政区编号\r\n  DeviceNumber: \"\", //设备编号\r\n  DeviceType: \"suyuan\", //设备类型\r\n  SensorsType: \"\",\r\n  Bind: \"\",\r\n  StartTime: \"\",\r\n  EndTime: \"\",\r\n  ExactMatch: false,\r\n  PageSize: 10,\r\n  PageNumber: 1,\r\n});\r\n\r\n// 批量操作\r\n\r\n// 表格总数量\r\nconst total = ref(0);\r\n// 表格项\r\nconst tableData = ref([]);\r\n\r\n// 获取设备列表\r\nconst getDeviceList = () => {\r\n  const params = {\r\n    ...filterParams(formData.value),\r\n  };\r\n  deviceList(params)\r\n    .then((res) => {\r\n      tableData.value = res.Data.Item.map((item: any, idx: number) => ({\r\n        ...item,\r\n        order:\r\n          (formData.value.PageNumber - 1) * formData.value.PageSize + idx + 1,\r\n      }));\r\n      total.value = res.Data.Total;\r\n    })\r\n    .catch((err: any) => {\r\n      console.log(err);\r\n      handle_err(err);\r\n    });\r\n};\r\n\r\n// 取消点位关联\r\n\r\n// 编辑/查看\r\n\r\n// 删除\r\n\r\n// 选中表格\r\n\r\n//批量操作\r\n\r\n// 表格数据导出\r\n\r\n// 点击设备编号，进入指标趋势-设备维度查看详情\r\n\r\nonMounted(() => {});\r\n\r\nwatch(\r\n  () => formData.value,\r\n  () => {\r\n    getDeviceList();\r\n  },\r\n  {\r\n    deep: true,\r\n    immediate: true,\r\n  }\r\n);\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n:deep(.el-form--inline .el-form-item) {\r\n  display: block;\r\n  width: 370px !important;\r\n}\r\n:deep(.el-form) {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n}\r\n:deep(.el-select) {\r\n  width: 100%;\r\n}\r\n.table-operate {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-bottom: 20px;\r\n  .left {\r\n    display: flex;\r\n  }\r\n  .batch {\r\n    margin-left: 12px;\r\n  }\r\n}\r\n.inner {\r\n  padding-left: 100px;\r\n  width: calc(100% - 340px);\r\n}\r\n.table-column {\r\n  cursor: pointer;\r\n  &:hover {\r\n    color: #409eff;\r\n  }\r\n}\r\n</style>\r\n"],"names":["deviceList","data","request","formData","ref","total","tableData","getDeviceList","params","filterParams","res","item","idx","err","handle_err","onMounted","watch"],"mappings":"sRAGO,MAAMA,EAAcC,GACzBC,EAAQ,IAAI,uBAAwBD,CAAI,4DCsB1C,MAAME,EAAWC,EAAU,CACzB,YAAa,GACb,aAAc,GACd,aAAc,GACd,WAAY,SACZ,YAAa,GACb,KAAM,GACN,UAAW,GACX,QAAS,GACT,WAAY,GACZ,SAAU,GACV,WAAY,CAAA,CACb,EAKKC,EAAQD,EAAI,CAAC,EAEbE,EAAYF,EAAI,CAAA,CAAE,EAGlBG,EAAgB,IAAM,CAC1B,MAAMC,EAAS,CACb,GAAGC,EAAaN,EAAS,KAAK,CAAA,EAEhCH,EAAWQ,CAAM,EACd,KAAME,GAAQ,CACbJ,EAAU,MAAQI,EAAI,KAAK,KAAK,IAAI,CAACC,EAAWC,KAAiB,CAC/D,GAAGD,EACH,OACGR,EAAS,MAAM,WAAa,GAAKA,EAAS,MAAM,SAAWS,EAAM,CACpE,EAAA,EACIP,EAAA,MAAQK,EAAI,KAAK,KAAA,CACxB,EACA,MAAOG,GAAa,CACnB,QAAQ,IAAIA,CAAG,EACfC,EAAWD,CAAG,CAAA,CACf,CAAA,EAiBL,OAAAE,EAAU,IAAM,CAAA,CAAE,EAElBC,EACE,IAAMb,EAAS,MACf,IAAM,CACUI,GAChB,EACA,CACE,KAAM,GACN,UAAW,EACb,CAAA"}